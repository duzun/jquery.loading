{"version":3,"file":"loading.min.js","sources":["../loading.js"],"sourcesContent":["/**\n * A jQuery plugin to add/remove classes to a collection while a promise is pending or something is loading asynchronously.\n *\n * @license MIT\n * @author Dumitru Uzun (DUzun.Me)\n * @version 1.2.0\n */\n// ---------------------------------------------------------------------------\nexport default function initLoading($) {\n\n        /**\n         * Adds/Removes loading class on the collection.\n         *\n         * Eg:\n         *   1)\n         *       $('selector').loading('loading'); // add class\n         *       ...\n         *       $('selector').loading(false); // remove added loading class\n         *   2)\n         *       var cb = $('selector').loading('loading', true); // add class and get the callback\n         *       ...\n         *       cb(); // remove added loading class\n         *   3)\n         *       $('selector').loading('loading', promise); // add class and remove on promise resolve or reject\n         *\n         * @param {String|Array} classes - classes to be added to collection while loading\n         * @param {Boolean|Promise} retCb - if true, return a done() function to be called when done loading\n         *                           - if a promise, remove classes on resolve or reject\n         *\n         * @return {jQuery|Function} - by default (no retCb) it returns the jQuery collection (this),\n         *                           but if retCb not falsy, done() function returned\n         */\n        function loading(classes, retCb) {\n            var lck = '_loading_class_';\n            var lcd = lck + 'disabled_';\n            var prp = 'disabled';\n            var that = this;\n            if ( classes === false ) {\n                that.each(function (i,e) {\n                    e = $(e);\n                    i = e.data(lck);\n                    if ( i ) {\n                        e.removeClass(i).data(lck, undefined);\n                    }\n                    i = e.data(lcd);\n                    if ( i ) {\n                        e.attr(i, null).prop(i, false).data(lcd, undefined);\n                    }\n                });\n            }\n            else {\n                if ( retCb ) {\n                    that.addClass(classes).attr(prp, prp).prop(prp, true);\n                    var done = function (a) {\n                        // Prevent calling it more then once\n                        if ( done ) {\n                            that.removeClass(classes).attr(prp, null).prop(prp, false);\n                            done = undefined;\n                        }\n                        return arguments.length == 1 ? a : that; // in Promises return the result without altering it\n                    };\n                    // If retCb is a promise, call done() on resolve and reject\n                    if ( $.isFunction(retCb.then) ) {\n                        retCb.then(done, done);\n                    }\n                    return done;\n                }\n                that.each(function (i,e) {\n                    e = $(e);\n                    i = e.data(lck);\n                    e.data(lck, (i?i+' ':'')+classes);\n                    if ( !e.prop(prp) ) {\n                        e.attr(prp, prp).prop(prp, true).data(lcd, prp);\n                    }\n                })\n                .addClass(classes);\n            }\n            return that;\n        }\n\n    $.fn.loading = loading;\n\n    return loading;\n}\n\n// Auto-init in browser when jQuery or Zepto is present\nif ( typeof window !== 'undefined' ) {\n    const $ = window.jQuery || window.Zepto;\n    if ( $ ) initLoading($);\n}\n"],"names":["initLoading","$","loading","classes","retCb","lck","lcd","prp","that","this","each","i","e","data","removeClass","undefined","attr","prop","addClass","done","a","arguments","length","isFunction","then","fn","window","jQuery","Zepto"],"mappings":";;;;;;;OAQe,SAASA,EAAYC,YAwBnBC,EAAQC,EAASC,OAClBC,EAAM,kBACNC,EAAMD,EAAM,YACZE,EAAM,WACNC,EAAOC,SACM,IAAZN,EACDK,EAAKE,MAAK,SAAUC,EAAEC,IAElBD,GADAC,EAAIX,EAAEW,IACAC,KAAKR,KAEPO,EAAEE,YAAYH,GAAGE,KAAKR,OAAKU,IAE/BJ,EAAIC,EAAEC,KAAKP,KAEPM,EAAEI,KAAKL,EAAG,MAAMM,KAAKN,GAAG,GAAOE,KAAKP,OAAKS,UAIhD,IACIX,EAAQ,CACTI,EAAKU,SAASf,GAASa,KAAKT,EAAKA,GAAKU,KAAKV,GAAK,OAC5CY,EAAO,SAAUC,UAEZD,IACDX,EAAKM,YAAYX,GAASa,KAAKT,EAAK,MAAMU,KAAKV,GAAK,GACpDY,OAAOJ,GAEgB,GAApBM,UAAUC,OAAcF,EAAIZ,UAGlCP,EAAEsB,WAAWnB,EAAMoB,OACpBpB,EAAMoB,KAAKL,EAAMA,GAEdA,EAEXX,EAAKE,MAAK,SAAUC,EAAEC,GAElBD,GADAC,EAAIX,EAAEW,IACAC,KAAKR,GACXO,EAAEC,KAAKR,GAAMM,EAAEA,EAAE,IAAI,IAAIR,GACnBS,EAAEK,KAAKV,IACTK,EAAEI,KAAKT,EAAKA,GAAKU,KAAKV,GAAK,GAAMM,KAAKP,EAAKC,MAGlDW,SAASf,UAEPK,SAGfP,EAAEwB,GAAGvB,QAAUA,EAERA,EAIX,GAAuB,oBAAXwB,OAAyB,KAC3BzB,EAAIyB,OAAOC,QAAUD,OAAOE,MAC7B3B,GAAID,EAAYC"}